@page "/login"
@using OpenBankClient.Data.Services
@using OpenBankClient.Data.Services.Base
@inject UsersService _usersService
@inject NavigationManager Navigation

<div class="row">
    <div class="col-5 shadow-lg p-5 border m-2 border-opacity-25 bg-light bg-gradient">
        <h2 class="text-center mb-3">Login</h2>
        <EditForm Model="@loginUser" OnSubmit="@LoginMethod"> 
            <p>
                <div class="input-group mb-3">
                  <span class="input-group-text" id="basic-addon1">Username</span>
                  <InputText type="text" class="form-control" aria-label="Username" aria-describedby="basic-addon1" @bind-Value="loginUser.Username"/>
                </div>
            </p>
            <p>
                <div class="input-group mb-3">
                  <span class="input-group-text" id="basic-addon1">Password</span>
                  <InputText type="Password" class="form-control" aria-label="Username" aria-describedby="basic-addon1" @bind-Value="loginUser.Password"/>
                </div>
            </p>
            <button class="btn btn-outline-dark"type="submit">Login </button>

        </EditForm>
    </div>
@*    <div class="col-5 border m-2 border-opacity-25 bg-light bg-gradient">

    </div>
*@</div>


@code {
    public LoginUserRequest loginUser { get; set; } = new();

    public async Task LoginMethod()
    {
        var response = await _usersService.Login(loginUser);
        if (response == null)
            return;
        Navigation.NavigateTo("/accounts");
    }

}
